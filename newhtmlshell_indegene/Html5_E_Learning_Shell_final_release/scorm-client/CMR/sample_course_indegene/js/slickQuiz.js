!function(e){e.slickQuiz=function(n,t){var s=this,a=e(n),o="#"+a.attr("id"),r={checkAnswerText:"Submit",nextQuestionText:"Next &raquo;",backButtonText:"",tryAgainText:"",skipStartButton:!0,numberOfQuestions:null,randomSort:!1,randomSortQuestions:!1,randomSortAnswers:!1,preventUnanswered:!0,completionResponseMessaging:!1,disableResponseMessaging:!1},d="questionCount",c="questions",l="question",u="answers",f="responses",p="correctResponse",h="correct",g="incorrect",m="checkAnswer",v="nextQuestion",w="backToQuestion",b="tryAgain",Q="."+d,k="."+c,x="."+l,z="."+u,q="."+f,y="."+p,R="."+h,A="."+g,I="."+m,T="."+v,O="."+w,M="."+b,S=o+" .startQuiz",C=o+" .quizName",N=o+" .quizArea",B=o+" .quizResults",U=o+" .quizResultsCopy",D=o+" .quizHeader",_=o+" .quizScore",L=o+" .quizLevel",P=e(S),j=e(C),F=e(N),J=e(B),H=e(U),Y=e(D),E=(e(_),e(L)),G="";t&&"undefined"!=typeof t.disableNext&&("undefined"==typeof t.preventUnanswered&&(t.preventUnanswered=t.disableNext),G+="The 'disableNext' option has been deprecated, please use 'preventUnanswered' in it's place.\n\n"),""!==G&&("undefined"!=typeof console?console.warn(G):alert(G)),s.config=e.extend(r,t);var K=s.config.json?s.config.json:"undefined"!=typeof quizJSON?quizJSON:null,V=s.config.randomSort||s.config.randomSortQuestions?K.questions.sort(function(){return Math.round(Math.random())-.5}):K.questions,W=V.length;s.config.numberOfQuestions&&W>=s.config.numberOfQuestions&&(V=V.slice(0,s.config.numberOfQuestions),W=V.length),s.method={setupQuiz:function(){j.hide().html(K.info.name).fadeIn(1e3),Y.hide().prepend(K.info.main).fadeIn(1e3),H.append(K.info.results),s.config.tryAgainText&&""!==s.config.tryAgainText&&H.before('<a class="button '+b+'" href="#">'+s.config.tryAgainText+"</a>");var n=e('<ol class="'+c+'"></ol>'),t=1;for(i in V)if(V.hasOwnProperty(i)){var a=V[i],o=e('<li class="'+l+'" id="question'+(t-1)+'"></li>');o.append('<div class="'+d+'">Question <span class="current">'+t+'</span> of <span class="total">'+W+"</span></div>"),o.append("<h3>"+t+". "+a.q+"</h3>");var r=0;for(i in a.a)a.a.hasOwnProperty(i)&&(answer=a.a[i],answer.correct&&r++);var p=e('<ul class="'+u+'"></ul>'),Q=s.config.randomSort||s.config.randomSortAnswers?a.a.sort(function(){return Math.round(Math.random())-.5}):a.a,k=a.select_any?a.select_any:!1,x="question"+(t-1),z=r>1&&!k?"checkbox":"radio";for(i in Q)if(Q.hasOwnProperty(i)){answer=Q[i],optionId=x+"_"+i.toString();var q='<input id="'+optionId+'" name="'+x+'" type="'+z+'" class="hidewarning with-gap filled-in" />',y='<label class="hidewarning" for="'+optionId+'">'+answer.option+"</label>",R=e("<li></li>").append(q).append(y);p.append(R)}if(o.append(p),!s.config.disableResponseMessaging){var A=e('<ul class="'+f+'"></ul>');A.append('<li class="'+h+'">'+a.correct+"</li>"),A.append('<li class="'+g+'">'+a.incorrect+"</li>"),o.append(A)}s.config.backButtonText&&""!==s.config.backButtonText&&o.append('<a href="#" class="button '+w+'">'+s.config.backButtonText+"</a>"),s.config.disableResponseMessaging||s.config.completionResponseMessaging?o.append('<a href="#" class="button '+v+" "+m+'">'+s.config.nextQuestionText+"</a>"):(o.append('<a href="#" class="button '+v+'">'+s.config.nextQuestionText+"</a>"),o.append('<a href="#" class="button '+m+'">'+s.config.checkAnswerText+"</a>")),n.append(o),t++}F.append(n),s.config.skipStartButton||0==P.length?(P.hide(),s.method.startQuiz(this)):P.fadeIn(500)},startQuiz:function(){function n(){var n=e(o+" "+k+" li").first();n.length&&n.fadeIn(500)}s.config.skipStartButton||0==P.length?n():P.fadeOut(300,function(){n()})},resetQuiz:function(n){J.fadeOut(300,function(){e(o+" input").prop("checked",!1).prop("disabled",!1),E.attr("class","quizLevel"),e(o+" "+y).removeClass(p),e(o+" "+x+","+o+" "+q+","+o+" "+R+","+o+" "+A+","+o+" "+T+","+o+" "+O).hide(),e(o+" "+Q+","+o+" "+z+","+o+" "+I).show(),F.append(e(o+" "+k)).show(),s.method.startQuiz(J)})},checkAnswer:function(n){var t=e(e(n).parents(x)[0]),a=t.find("input:checked"),o=parseInt(t.attr("id").replace(/(question)/,""),10),r=V[o].a,d=V[o].select_any?V[o].select_any:!1,c=[];for(i in r)if(r.hasOwnProperty(i)){var l=r[i];l.correct&&c.push(e("<div />").html(l.option).text())}var u=[];if(a.each(function(){var n=e(this).next("label").text();u.push(n),e(".answers").children().attr("class","wantdisable"),e(".wantdisable").children().attr("disabled","disabled")}),s.config.preventUnanswered&&0===u.length)return e(".messagearea").show(),e(".messagearea").html("<p>You must select at least one answer.</p>"),!1;var f=s.method.compareAnswers(c,u,d);f&&t.addClass(p),s.config.disableResponseMessaging||(s.config.completionResponseMessaging||(t.find(z).show(),t.find(q).show(),e(n).hide(),t.find(T).fadeIn(300),t.find(O).fadeIn(300)),t.find(f?R:A).fadeIn(300))},nextQuestion:function(n){var i=e(e(n).parents(x)[0]),t=i.next(x),a=i.find("input:checked");return s.config.preventUnanswered&&0===a.length?!1:void(t.length?i.fadeOut(300,function(){t.find(O).show().end().fadeIn(500)}):s.method.completeQuiz())},backToQuestion:function(n){var i=e(e(n).parents(x)[0]),t=i.find(z);if("block"===t.css("display")){var a=i.prev(x);i.fadeOut(300,function(){a.removeClass(p),a.find(q+", "+q+" li").hide(),a.find(z).show(),a.find(I).show(),s.config.disableResponseMessaging||s.config.completionResponseMessaging||a.find(T).hide(),"question0"!=a.attr("id")?a.find(O).show():a.find(O).hide(),a.fadeIn(500)})}else i.find(q).fadeOut(300,function(){i.removeClass(p),i.find(q+" li").hide(),t.fadeIn(500),i.find(I).fadeIn(500),i.find(T).hide(),"question0"!=i.attr("id")?i.find(O).show():i.find(O).hide()})},completeQuiz:function(){var n=[K.info.level1,K.info.level2,K.info.level3,K.info.level4,K.info.level5],i=e(o+" "+y).length,t=s.method.calculateLevel(i),a=e.isNumeric(t)?n[t]:"";e(_+" span").html(i+" / "+W),e(L+" span").html(a),e(L).addClass("level"+t),F.fadeOut(300,function(){s.config.completionResponseMessaging&&!s.config.disableResponseMessaging?(e(o+" input").prop("disabled",!0),e(o+" .button:not("+M+"), "+o+" "+Q).hide(),e(o+" "+x+", "+o+" "+q).show(),J.append(e(o+" "+k)).fadeIn(500)):(J.fadeIn(500),e(".nextFrame").removeClass("hide"))})},compareAnswers:function(n,i,t){return t?e.inArray(i[0],n)>-1:0===e(n).not(i).length&&0===e(i).not(n).length},calculateLevel:function(e){var n=(e/W).toFixed(2),i=null;return s.method.inRange(0,.2,n)?i=4:s.method.inRange(.21,.4,n)?i=3:s.method.inRange(.41,.6,n)?i=2:s.method.inRange(.61,.8,n)?i=1:s.method.inRange(.81,1,n)&&(i=0),i},inRange:function(e,n,i){return i>=e&&n>=i}},s.init=function(){s.method.setupQuiz(),P.on("click",function(e){e.preventDefault(),s.method.startQuiz()}),e(o+" "+M).on("click",function(e){e.preventDefault(),s.method.resetQuiz(this)}),e(o+" "+I).on("click",function(e){e.preventDefault(),s.method.checkAnswer(this)}),e(o+" "+O).on("click",function(e){e.preventDefault(),s.method.backToQuestion(this)}),e(o+" "+T).on("click",function(n){n.preventDefault(),s.method.nextQuestion(this),e(".wantdisable").children().removeAttr("disabled","disabled")}),e(".hidewarning").bind("click",function(){e(".messagearea").hide()})},s.init()},e.fn.slickQuiz=function(n){return this.each(function(){if(void 0===e(this).data("slickQuiz")){var i=new e.slickQuiz(this,n);e(this).data("slickQuiz",i)}})}}(jQuery);